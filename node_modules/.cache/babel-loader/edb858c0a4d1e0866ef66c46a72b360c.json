{"ast":null,"code":"\"use strict\";\n\nimport _defineProperty from \"C:\\\\Users\\\\stoce\\\\Documents\\\\GitHub\\\\touristos\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\stoce\\\\Documents\\\\GitHub\\\\touristos\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\stoce\\\\Documents\\\\GitHub\\\\touristos\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"axios\";\nimport createHmac from \"create-hmac\";\nimport OAuth from \"oauth-1.0a\";\nimport Url from \"url-parse\";\n/**\n * WooCommerce REST API wrapper\n *\n * @param {Object} opt\n */\n\nvar WooCommerceRestApi =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Class constructor.\n   *\n   * @param {Object} opt\n   */\n  function WooCommerceRestApi(opt) {\n    _classCallCheck(this, WooCommerceRestApi);\n\n    if (!(this instanceof WooCommerceRestApi)) {\n      return new WooCommerceRestApi(opt);\n    }\n\n    opt = opt || {};\n\n    if (!opt.url) {\n      throw new OptionsException(\"url is required\");\n    }\n\n    if (!opt.consumerKey) {\n      throw new OptionsException(\"consumerKey is required\");\n    }\n\n    if (!opt.consumerSecret) {\n      throw new OptionsException(\"consumerSecret is required\");\n    }\n\n    this.classVersion = \"1.0.1\";\n\n    this._setDefaultsOptions(opt);\n  }\n  /**\n   * Set default options\n   *\n   * @param {Object} opt\n   */\n\n\n  _createClass(WooCommerceRestApi, [{\n    key: \"_setDefaultsOptions\",\n    value: function _setDefaultsOptions(opt) {\n      this.url = opt.url;\n      this.wpAPIPrefix = opt.wpAPIPrefix || \"wp-json\";\n      this.version = opt.version || \"wc/v3\";\n      this.isHttps = /^https/i.test(this.url);\n      this.consumerKey = opt.consumerKey;\n      this.consumerSecret = opt.consumerSecret;\n      this.encoding = opt.encoding || \"utf8\";\n      this.queryStringAuth = opt.queryStringAuth || false;\n      this.port = opt.port || \"\";\n      this.timeout = opt.timeout;\n      this.axiosConfig = opt.axiosConfig || {};\n    }\n    /**\n     * Parse params object.\n     *\n     * @param {Object} params\n     * @param {Object} query\n     */\n\n  }, {\n    key: \"_parseParamsObject\",\n    value: function _parseParamsObject(params, query) {\n      for (var key in params) {\n        var value = params[key];\n\n        if (typeof value === \"object\") {\n          for (var prop in value) {\n            var itemKey = key.toString() + \"[\" + prop.toString() + \"]\";\n            query[itemKey] = value[prop];\n          }\n        } else {\n          query[key] = value;\n        }\n      }\n\n      return query;\n    }\n    /**\n     * Normalize query string for oAuth\n     *\n     * @param  {String} url\n     * @param  {Object} params\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: \"_normalizeQueryString\",\n    value: function _normalizeQueryString(url, params) {\n      // Exit if don't find query string.\n      if (url.indexOf(\"?\") === -1 && Object.keys(params).length === 0) {\n        return url;\n      }\n\n      var query = new Url(url, null, true).query;\n      var values = [];\n      var queryString = \"\"; // Include params object into URL.searchParams.\n\n      this._parseParamsObject(params, query);\n\n      for (var key in query) {\n        values.push(key);\n      }\n\n      values.sort();\n\n      for (var i in values) {\n        if (queryString.length) {\n          queryString += \"&\";\n        }\n\n        queryString += encodeURIComponent(values[i]).replace(/%5B/g, \"[\").replace(/%5D/g, \"]\");\n        queryString += \"=\";\n        queryString += encodeURIComponent(query[values[i]]);\n      }\n\n      return url.split(\"?\")[0] + \"?\" + queryString;\n    }\n    /**\n     * Get URL\n     *\n     * @param  {String} endpoint\n     * @param  {Object} params\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: \"_getUrl\",\n    value: function _getUrl(endpoint, params) {\n      var api = this.wpAPIPrefix + \"/\";\n      var url = this.url.slice(-1) === \"/\" ? this.url : this.url + \"/\";\n      url = url + api + this.version + \"/\" + endpoint; // Include port.\n\n      if (this.port !== \"\") {\n        var hostname = new Url(url).hostname;\n        url = url.replace(hostname, hostname + \":\" + this.port);\n      }\n\n      if (!this.isHttps) {\n        return this._normalizeQueryString(url, params);\n      }\n\n      return url;\n    }\n    /**\n     * Get OAuth\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: \"_getOAuth\",\n    value: function _getOAuth() {\n      var data = {\n        consumer: {\n          key: this.consumerKey,\n          secret: this.consumerSecret\n        },\n        signature_method: \"HMAC-SHA256\",\n        hash_function: function hash_function(base, key) {\n          return createHmac(\"sha256\", key).update(base).digest(\"base64\");\n        }\n      };\n      return new OAuth(data);\n    }\n    /**\n     * Do requests\n     *\n     * @param  {String} method\n     * @param  {String} endpoint\n     * @param  {Object} data\n     * @param  {Object} params\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: \"_request\",\n    value: function _request(method, endpoint, data) {\n      var params = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n      var url = this._getUrl(endpoint, params);\n\n      var options = {\n        url: url,\n        method: method,\n        responseEncoding: this.encoding,\n        timeout: this.timeout,\n        responseType: \"json\",\n        headers: {\n          \"User-Agent\": \"WooCommerce REST API - JS Client/\" + this.classVersion,\n          Accept: \"application/json\"\n        }\n      };\n\n      if (this.isHttps) {\n        if (this.queryStringAuth) {\n          options.params = {\n            consumer_key: this.consumerKey,\n            consumer_secret: this.consumerSecret\n          };\n        } else {\n          options.auth = {\n            username: this.consumerKey,\n            password: this.consumerSecret\n          };\n        }\n\n        options.params = _objectSpread({}, options.params, {}, params);\n      } else {\n        options.params = this._getOAuth().authorize({\n          url: url,\n          method: method\n        });\n      }\n\n      if (data) {\n        options.headers[\"Content-Type\"] = \"application/json;charset=utf-8\";\n        options.data = JSON.stringify(data);\n      } // Allow set and override Axios options.\n\n\n      options = _objectSpread({}, options, {}, this.axiosConfig);\n      return axios(options);\n    }\n    /**\n     * GET requests\n     *\n     * @param  {String} endpoint\n     * @param  {Object} params\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(endpoint) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return this._request(\"get\", endpoint, null, params);\n    }\n    /**\n     * POST requests\n     *\n     * @param  {String} endpoint\n     * @param  {Object} data\n     * @param  {Object} params\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: \"post\",\n    value: function post(endpoint, data) {\n      var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this._request(\"post\", endpoint, data, params);\n    }\n    /**\n     * PUT requests\n     *\n     * @param  {String} endpoint\n     * @param  {Object} data\n     * @param  {Object} params\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: \"put\",\n    value: function put(endpoint, data) {\n      var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this._request(\"put\", endpoint, data, params);\n    }\n    /**\n     * DELETE requests\n     *\n     * @param  {String} endpoint\n     * @param  {Object} params\n     * @param  {Object} params\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: \"delete\",\n    value: function _delete(endpoint) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return this._request(\"delete\", endpoint, null, params);\n    }\n    /**\n     * OPTIONS requests\n     *\n     * @param  {String} endpoint\n     * @param  {Object} params\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: \"options\",\n    value: function options(endpoint) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return this._request(\"options\", endpoint, null, params);\n    }\n  }]);\n\n  return WooCommerceRestApi;\n}();\n/**\n * Options Exception.\n */\n\n\nexport { WooCommerceRestApi as default };\nexport var OptionsException =\n/**\n * Constructor.\n *\n * @param {String} message\n */\nfunction OptionsException(message) {\n  _classCallCheck(this, OptionsException);\n\n  this.name = \"Options Error\";\n  this.message = message;\n};","map":{"version":3,"sources":["C:/Users/stoce/Documents/GitHub/touristos/node_modules/@woocommerce/woocommerce-rest-api/index.mjs"],"names":["axios","createHmac","OAuth","Url","WooCommerceRestApi","opt","url","OptionsException","consumerKey","consumerSecret","classVersion","_setDefaultsOptions","wpAPIPrefix","version","isHttps","test","encoding","queryStringAuth","port","timeout","axiosConfig","params","query","key","value","prop","itemKey","toString","indexOf","Object","keys","length","values","queryString","_parseParamsObject","push","sort","i","encodeURIComponent","replace","split","endpoint","api","slice","hostname","_normalizeQueryString","data","consumer","secret","signature_method","hash_function","base","update","digest","method","_getUrl","options","responseEncoding","responseType","headers","Accept","consumer_key","consumer_secret","auth","username","password","_getOAuth","authorize","JSON","stringify","_request","message","name"],"mappings":"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","sourcesContent":["\"use strict\";\n\nimport axios from \"axios\";\nimport createHmac from \"create-hmac\";\nimport OAuth from \"oauth-1.0a\";\nimport Url from \"url-parse\";\n\n/**\n * WooCommerce REST API wrapper\n *\n * @param {Object} opt\n */\nexport default class WooCommerceRestApi {\n  /**\n   * Class constructor.\n   *\n   * @param {Object} opt\n   */\n  constructor(opt) {\n    if (!(this instanceof WooCommerceRestApi)) {\n      return new WooCommerceRestApi(opt);\n    }\n\n    opt = opt || {};\n\n    if (!opt.url) {\n      throw new OptionsException(\"url is required\");\n    }\n\n    if (!opt.consumerKey) {\n      throw new OptionsException(\"consumerKey is required\");\n    }\n\n    if (!opt.consumerSecret) {\n      throw new OptionsException(\"consumerSecret is required\");\n    }\n\n    this.classVersion = \"1.0.1\";\n    this._setDefaultsOptions(opt);\n  }\n\n  /**\n   * Set default options\n   *\n   * @param {Object} opt\n   */\n  _setDefaultsOptions(opt) {\n    this.url = opt.url;\n    this.wpAPIPrefix = opt.wpAPIPrefix || \"wp-json\";\n    this.version = opt.version || \"wc/v3\";\n    this.isHttps = /^https/i.test(this.url);\n    this.consumerKey = opt.consumerKey;\n    this.consumerSecret = opt.consumerSecret;\n    this.encoding = opt.encoding || \"utf8\";\n    this.queryStringAuth = opt.queryStringAuth || false;\n    this.port = opt.port || \"\";\n    this.timeout = opt.timeout;\n    this.axiosConfig = opt.axiosConfig || {};\n  }\n\n  /**\n   * Parse params object.\n   *\n   * @param {Object} params\n   * @param {Object} query\n   */\n  _parseParamsObject(params, query) {\n    for (const key in params) {\n      const value = params[key];\n\n      if (typeof value === \"object\") {\n        for (const prop in value) {\n          const itemKey = key.toString() + \"[\" + prop.toString() + \"]\";\n          query[itemKey] = value[prop];\n        }\n      } else {\n        query[key] = value;\n      }\n    }\n\n    return query;\n  }\n\n  /**\n   * Normalize query string for oAuth\n   *\n   * @param  {String} url\n   * @param  {Object} params\n   *\n   * @return {String}\n   */\n  _normalizeQueryString(url, params) {\n    // Exit if don't find query string.\n    if (url.indexOf(\"?\") === -1 && Object.keys(params).length === 0) {\n      return url;\n    }\n\n    const query = new Url(url, null, true).query;\n    const values = [];\n\n    let queryString = \"\";\n\n    // Include params object into URL.searchParams.\n    this._parseParamsObject(params, query);\n\n    for (const key in query) {\n      values.push(key);\n    }\n    values.sort();\n\n    for (const i in values) {\n      if (queryString.length) {\n        queryString += \"&\";\n      }\n\n      queryString += encodeURIComponent(values[i])\n        .replace(/%5B/g, \"[\")\n        .replace(/%5D/g, \"]\");\n      queryString += \"=\";\n      queryString += encodeURIComponent(query[values[i]]);\n    }\n\n    return url.split(\"?\")[0] + \"?\" + queryString;\n  }\n\n  /**\n   * Get URL\n   *\n   * @param  {String} endpoint\n   * @param  {Object} params\n   *\n   * @return {String}\n   */\n  _getUrl(endpoint, params) {\n    const api = this.wpAPIPrefix + \"/\";\n\n    let url = this.url.slice(-1) === \"/\" ? this.url : this.url + \"/\";\n\n    url = url + api + this.version + \"/\" + endpoint;\n\n    // Include port.\n    if (this.port !== \"\") {\n      const hostname = new Url(url).hostname;\n\n      url = url.replace(hostname, hostname + \":\" + this.port);\n    }\n\n    if (!this.isHttps) {\n      return this._normalizeQueryString(url, params);\n    }\n\n    return url;\n  }\n\n  /**\n   * Get OAuth\n   *\n   * @return {Object}\n   */\n  _getOAuth() {\n    const data = {\n      consumer: {\n        key: this.consumerKey,\n        secret: this.consumerSecret\n      },\n      signature_method: \"HMAC-SHA256\",\n      hash_function: (base, key) => {\n        return createHmac(\"sha256\", key)\n          .update(base)\n          .digest(\"base64\");\n      }\n    };\n\n    return new OAuth(data);\n  }\n\n  /**\n   * Do requests\n   *\n   * @param  {String} method\n   * @param  {String} endpoint\n   * @param  {Object} data\n   * @param  {Object} params\n   *\n   * @return {Object}\n   */\n  _request(method, endpoint, data, params = {}) {\n    const url = this._getUrl(endpoint, params);\n\n    let options = {\n      url: url,\n      method: method,\n      responseEncoding: this.encoding,\n      timeout: this.timeout,\n      responseType: \"json\",\n      headers: {\n        \"User-Agent\": \"WooCommerce REST API - JS Client/\" + this.classVersion,\n        Accept: \"application/json\"\n      }\n    };\n\n    if (this.isHttps) {\n      if (this.queryStringAuth) {\n        options.params = {\n          consumer_key: this.consumerKey,\n          consumer_secret: this.consumerSecret\n        };\n      } else {\n        options.auth = {\n          username: this.consumerKey,\n          password: this.consumerSecret\n        };\n      }\n\n      options.params = { ...options.params, ...params };\n    } else {\n      options.params = this._getOAuth().authorize({\n        url: url,\n        method: method\n      });\n    }\n\n    if (data) {\n      options.headers[\"Content-Type\"] = \"application/json;charset=utf-8\";\n      options.data = JSON.stringify(data);\n    }\n\n    // Allow set and override Axios options.\n    options = { ...options, ...this.axiosConfig };\n\n    return axios(options);\n  }\n\n  /**\n   * GET requests\n   *\n   * @param  {String} endpoint\n   * @param  {Object} params\n   *\n   * @return {Object}\n   */\n  get(endpoint, params = {}) {\n    return this._request(\"get\", endpoint, null, params);\n  }\n\n  /**\n   * POST requests\n   *\n   * @param  {String} endpoint\n   * @param  {Object} data\n   * @param  {Object} params\n   *\n   * @return {Object}\n   */\n  post(endpoint, data, params = {}) {\n    return this._request(\"post\", endpoint, data, params);\n  }\n\n  /**\n   * PUT requests\n   *\n   * @param  {String} endpoint\n   * @param  {Object} data\n   * @param  {Object} params\n   *\n   * @return {Object}\n   */\n  put(endpoint, data, params = {}) {\n    return this._request(\"put\", endpoint, data, params);\n  }\n\n  /**\n   * DELETE requests\n   *\n   * @param  {String} endpoint\n   * @param  {Object} params\n   * @param  {Object} params\n   *\n   * @return {Object}\n   */\n  delete(endpoint, params = {}) {\n    return this._request(\"delete\", endpoint, null, params);\n  }\n\n  /**\n   * OPTIONS requests\n   *\n   * @param  {String} endpoint\n   * @param  {Object} params\n   *\n   * @return {Object}\n   */\n  options(endpoint, params = {}) {\n    return this._request(\"options\", endpoint, null, params);\n  }\n}\n\n/**\n * Options Exception.\n */\nexport class OptionsException {\n  /**\n   * Constructor.\n   *\n   * @param {String} message\n   */\n  constructor(message) {\n    this.name = \"Options Error\";\n    this.message = message;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}